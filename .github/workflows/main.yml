name: Compile PDFs

on:
  push: {}

jobs:
  build:
    runs-on: ubuntu-18.04
    container: thomasweise/texlive

    steps:
      - name: Checkout repo
        uses: actions/checkout@v2

      - name: Create public directory to host HTML
        run: mkdir public

      - name: Convert tex to HTML
        uses: docker://pandoc/latex:2.9
        with:
          args: >-  # allows you to break string into multiple lines
            --standalone
            --output=public/index.html
            -f latex
            examples/cv/education.tex examples/cv/skills.tex examples/cv/experience.tex examples/cv/extracurricular.tex examples/cv/honors.tex examples/cv/presentation.tex examples/cv/writing.tex examples/cv/committees.tex examples/cv.tex    
      
      - name: Install rsync
        run: |
          apt-get update && apt-get install -y rsync

      - name: Deploy
        uses: JamesIves/github-pages-deploy-action@4.1.7
        with:
          branch: gh-pages # The branch the action should deploy to.
          folder: build # The folder the action should deploy.
